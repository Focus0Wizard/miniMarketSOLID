@{
    var path = Context.Request.Path.Value?.ToLower() ?? "/";
}
<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>@(ViewData["Title"] ?? "Tienda Online")</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
            --accent-red: #E3424F;
            --sky: #4dabf7;
            --sky-hover: #339af0;
            --bg-soft: #F2F9F3;
            --steel: #4F86A0;
            --navy: #193652;
            --text: #0b1320;
            --muted: #7a8693;
            --border: #e6e8ec;
            --brand: var(--navy);
            --brand-600: #143044;
            --brand-700: #102736;
            --surf: #f6fbff;
            --hover: #eaf3f8;
        }

        body {
            color: var(--text);
        }

        /* NAVBAR */
        .navbar-surface {
            background: var(--surf);
            border-bottom: 1px solid var(--border);
        }

        .navbar-brand {
            font-weight: 700;
            letter-spacing: .2px;
            background: linear-gradient(135deg, var(--brand), #6aa7c5);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .nav-link {
            color: var(--text) !important;
            padding: .55rem 1rem;
            border-radius: .9rem;
            transition: all .15s ease;
        }

            .nav-link:hover {
                background: var(--hover);
            }

            .nav-link.active {
                background: var(--brand);
                color: #fff !important;
                font-weight: 600;
            }

        /* Botón nav */
        .btn-nav {
            border: 0;
            background: var(--brand);
            color: #fff;
            padding: .5rem 1rem;
            border-radius: .9rem;
            font-weight: 600;
            transition: background .15s ease;
        }

            .btn-nav:hover {
                background: var(--brand-600);
                color: #fff;
            }

        /* Input */
        .input-lg {
            padding: .9rem 1rem;
            border-radius: .8rem;
            border: 1px solid var(--border);
        }

            .input-lg:focus {
                border-color: var(--steel);
                box-shadow: 0 0 0 .2rem rgba(79, 134, 160, .15);
                outline: 0;
            }

        /* Botón azul celeste outline */
        .btn-outline-sky {
            color: var(--sky);
            border: 1px solid var(--sky);
            font-weight: 600;
            border-radius: .6rem;
            transition: all .2s ease-in-out;
        }

            .btn-outline-sky:hover {
                background: var(--sky-hover);
                border-color: var(--sky-hover);
                color: #fff;
            }

        .shadow-soft {
            box-shadow: 0 12px 32px rgba(16,39,54,.08);
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-surface">
        <div class="container">
            <a class="navbar-brand" href="/Index">Tienda Online</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div id="nav" class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto gap-2">
                    <li class="nav-item">
                        <a class="nav-link @(path == "/" || path == "/index" ? "active" : "")" href="/Index">Inicio</a>
                    </li>

                    @if (User.Identity?.IsAuthenticated == true)
                    {
                        if (User.IsInRole("Admin"))
                        {
                            <li class="nav-item">
                                <a class="nav-link @(path.StartsWith("/clientes") ? "active" : "")" href="/Clientes/Index">Clientes</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link @(path.StartsWith("/productos") ? "active" : "")" href="/Productos/Index">Productos</a>
                            </li>
                        }
                        else if (User.IsInRole("Cliente"))
                        {
                            <li class="nav-item">
                                <a class="nav-link @(path.StartsWith("/catalogo") ? "active" : "")" href="/Catalogo/Index">Productos</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link @(path.StartsWith("/carrito") ? "active" : "")" href="/Carrito/Detalle">Carrito</a>
                            </li>
                        }

                        <li class="nav-item">
                            <form method="post" asp-page="/Account/Logout" class="d-inline">
                                <button type="submit" class="btn btn-nav btn-sm">
                                    Salir (@User.Identity!.Name)
                                </button>
                            </form>
                        </li>
                    }
                    else
                    {
                        <li class="nav-item">
                            <a class="btn btn-nav btn-sm" asp-page="/Account/Login">Ingresar</a>
                        </li>
                    }
                </ul>
            </div>
        </div>
    </nav>

    <main class="container">
        @RenderBody()
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
